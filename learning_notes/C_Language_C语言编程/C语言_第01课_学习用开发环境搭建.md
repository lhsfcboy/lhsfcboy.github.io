# C程序编译环境搭建

用来执行一些小程序，验证基本想法

## Linux下的GCC环境

过于自然, 本文不再赘述

### gcc or clang

## Windows下的编译环境

大概有这么两类办法:

- 变相用回Linux
  - 虚拟机
  - Linux云主机 + 远程文本编辑, 例如`VSCode Remote`
- 在Windows本地实现
  - 自己安装文本编辑器+GCC编译器+命令行工具
  - 使用(主要是微软的)集成开发环境

### Windows下最快速的方案: Dev C++

- 现代的开发者绝少使用C语言作为主力开发, 对于初学者而言一个能快速执行的方案好过任何其他因素
- 参考: [如何快速在 Windows 上搭建 C 语言开发环境？](https://www.zhihu.com/question/3362698520)

### Windows下借助虚拟机实现类linux环境 WSL or Vagrant

### Windows下文本编辑器VSCode + GCC编译器 + 命令行工具

这是最推荐的方案, 比较贴近现实工作中的开发工具

主要的难点在于配置编译工具命令

- [微软官方指引](https://code.visualstudio.com/docs/languages/cpp)
- [一份中文指引](https://cloud.tencent.com/developer/article/1803522)

Windows环境下的gcc通常有以下两个选择

- [Cygwin](https://cygwin.com/install.html)
  - 最早的版本于1995年10月发布, 目标是让Windows用户可以使用GNU和开源工具, 如bash, gcc, less等
  - The GNU Compiler Collection includes front ends for C, C++, Objective-C, Fortran, and Go, as well as libraries for these languages (libstdc++, libgcj,...).
  - Get that Linux feeling - on Windows
  - 安装过程有点烦人, 不折腾了
- MinGW-W64:
  - MinGW是“Minimalist GNU for Windows”的缩写，即只是一个自由开源的最小开发工具集
  - mingw-gcc编译工具链、mingw软件包管理器（mingw-get），用于开发Windows原生程序。第一版的mingw-gcc是利用早期的Cygwin套件编译而成
  - 前身是MinGW
  - Minimalist GNU for Windows
  - [MingW-W64-builds](https://github.com/niXman/mingw-builds-binaries/releases)
    - x86_64架构 / win32 / RunTime环境可选ucrt或msvcrt
    - 有gcc命令，没有make命令
      - 是不是可以直接复制`mingw-make.exe`为`make.exe`
      - [Make for Windows](https://gnuwin32.sourceforge.net/packages/make.htm)
  - 推荐直接选择`MSYS2`使用
    - 有make命令

当然也有其他厂家的C编译器可以选择

- MSVC工具链
  - Microsoft Visual C++

### Windows下使用微软的集成开发环境（IDE）Visual Studio Express 或者 Visual Studio

微软在上古时期推出的C/C++集成开发环境, [Visual Studio Tutorial](https://cs-people.bu.edu/deht/CS585/VSTutorial/)

## 歪门邪道: 使用类似Jupyter的在线服务

大部分时候运行C语言都是简短的单个文件测试的话, 这个办法不错. 稍微复杂一点的C程序就不太好管理了.

### Google Colab

- 无缝对接谷歌云盘
- 无缝AI提示
- 没有C的运行内核
  - Google Colab 默认提供了 Python3 和 R语言 的运行内核。但是其实只要后台Ubuntu所支持的语言都可以通过魔术命令来操作终端实现。
  - [Google Colaboratoryで実行できる主な言語と環境構築方法まとめ](https://qiita.com/u-10bei/items/38d6f0e4bfdc40efce3a#%E7%AC%AC%EF%BC%93%E4%BD%8Djava)
- 目前还没有找到比较方便的代码格式化办法
  - 临时用在线的C语言formatter 应付
- 因为是默认Pytho, 所以代码是按照Python进行解析
  - 可以用Text Editor修改kernel的运行环境
    - 修改后, 不会显示毫无意义的语法错误提示, 会有一个提示说Colab不知此C运行内核(无法识别运行时“c” 默认为“python3”), 直接无视即可

```json
    "kernelspec": {
      "name": "c",
      "display_name": "C lang"
    },
    "language_info": {
      "name": "c"
    }
```

- 如下是一个简单的例子
  - 代码部分
  - 执行部分，可以接受scanf一类的输入

```C
%%file hello.c

#include <stdio.h>
void my_func(int p);
int main()
{
    int a = 1;
    my_func(a);
    printf("Value of a:          %d\n", a);
}

void my_func(int p)   // p = valueOf(a); // p=1
{
  p = p -1;
}
```

```shell
!gcc --version
!cat /etc/issue
!pwd
!gcc -Wall hello.c -o hello && ./hello
```
