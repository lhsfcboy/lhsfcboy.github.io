
# MySQL存储浮点小数

单精度浮点数的声明语法是float(M,D)，使用4字节储存数据，其中M表示浮点数允许的最大长度（小数点前和小数点后的总长度），D表示小数点后精确的位数。双精度浮点数声明语句是double(M,D),使用8个字节存储数据，使用方法和单精度是完全一样的.

为了避免精度损失，最好的做法就是使用decimal类型，decimal类型声明语法Decimal(M,D)，同单精度浮点数一样，M声明可存放的小数总长度，D声明小数点后可以精确多少位。  MySQL在内部把DECIMAL数据类型存储为字符串，更精确地保留它们的值。M是数字最大位数（精度precision），范围1-65；D是小数点右侧数字个数（标度scale），范围0-30，但不得超过M。

Decimal类型精度范围为 1 到 31；存储Decimal数据需要的字节数计算公式：总长度/2（舍掉小数）+ 1 ；例如decimal(9,4)，所占用的字节为9/2=4.5，直接去掉小数得4，再用4+1=5字节。

```sql
--新建表t6，设定两列，第一列float类型，第二列decimal类型，两列支持的最大长度都设定成9，小数点后支持两位
mysql> create table t6(fl double(9,2),de decimal(9,2));

--输入数值测试,数值本身并没有超过规定的长度
mysql> insert into t6 values(1234567.89,1234567.89);
--float类型末尾出现精度损失，而decimal因为采取了压缩十进制格式存储，所以更加精确
mysql> select * from t6;
+------------+------------+
| fl         | de         |
+------------+------------+
| 1234567.88 | 1234567.89 |
+------------+------------+
```
